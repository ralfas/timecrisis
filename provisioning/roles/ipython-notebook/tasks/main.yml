---
- name: Add EPEL 6.8.
  shell: rpm -q epel-release-6-8 | grep -qw epel-release-6-8 || rpm -i http://www.mirrorservice.org/sites/dl.fedoraproject.org/pub/epel/6/i386/epel-release-6-8.noarch.rpm
  sudo: yes

- name: Install dependencies using yum.
  yum: name={{ item }} state=present
  sudo: yes
  with_items:
    - centos-release-SCL
    - curl
    - libselinux-python
    - gcc
    - gcc-c++
    - python27
    - ghc-pandoc
    - rrdtool

- name: Install pip with python2.7.
  shell: scl enable python27 "curl https://raw.githubusercontent.com/pypa/pip/master/contrib/get-pip.py | python -"
  sudo: yes

- name: Install ipython notebook with pip2.7.
  shell: scl enable python27 'pip2.7 install {{ item }}'
  sudo: yes
  with_items:
    - pyzmq
    - tornado
    - jinja
    - ipython[notebook]

- name: Install rrdtool-python bindings.
  yum: name=rrdtool-python state=present
  sudo: yes

# Launch command:
#   scl enable python27 "ipython notebook --NotebookApp.ip='192.168.50.1'"
# TODO:
#  - init.d script for ipython
#  - Ansible service management
#
